<ul>
    {% if home %}
        <li class="selected">
            <a href="{{ path('localized_frontend', {'locale': locale}) }}">Home</a>
        </li>
    {% endif %}
    {% for menu in menus %}
        <li class="{{ menu.menus|length > 0 ? 'has_submenu' : '' }}">
            {% set slug = menu.article.slug  %}

            {% if (slug2 is defined) %}
                <a href="{{ path('article', {'locale': locale, 'slug': slug2, 'slug2': slug}) }}">{{ menu }}</a>
            {% else %}
                <a href="{{ path('article', {'locale': locale, 'slug': slug}) }}">{{ menu }}</a>
            {% endif %}

            {% if menu.menus|length > 0 %}
                {% include 'MyFrontendBundle:Default:_menu.html.twig' with { 'menus': menu.menus, 'locale': locale, 'home': false, 'slug2': menu.slug } %}
            {% endif %}
        </li>
    {% endfor %}
</ul>